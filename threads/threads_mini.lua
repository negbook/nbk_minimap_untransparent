Threads={}Threads_OnceThread={}Threads.CreateThreadOnce=function(a)if Threads_OnceThread[tostring(a)]then return end;Threads_OnceThread[tostring(a)]=true;CreateThread(a)end;Threads.ClearThreadOnce=function(b)Threads_OnceThread[b]=nil end;local function c(d)return Threads_ActionTables[d]end;Threads_Alive={}Threads_Timers={}Threads_Functions={}Threads_Once={}Threads_ActionTables={}Threads.loop=function()error("Outdated",2)end;Threads.loop2=function(e,f,g)if Threads_Once[e]then return end;local b=e or tostring(g)local d=f>=0 and f or 0;local h=c(d)if h then if Threads_Functions[b]then print('[Warning]Threads'..b..' is doubly and replaced')end;Threads_Alive[b]=true;Threads_Functions[b]=g;Threads_Timers[b]=d;table.insert(Threads_ActionTables[d],b)else if Threads_Functions[b]then print('[Warning]Threads'..b..' is doubly and replaced')end;Threads_Alive[b]=true;Threads_Functions[b]=g;Threads_Timers[b]=d;Threads_ActionTables[d]={}local i=Threads_ActionTables[d]local j=d;table.insert(Threads_ActionTables[d],b)CreateThread(function()while true do if#i==0 then return end;for k=1,#i do local l=i[k]if Threads_Alive[l]and Threads_Functions[l]and Threads_Timers[l]==d then Threads_Functions[l](l,#i)else if i and i[k]then table.remove(i,k)if#i==0 then Threads.KillLoop(b,d)return end end end end;Wait(j)end;return end)end end;Threads.CreateLoop=function(...)local m={...}local n=#m;local o,d,b;if n==3 then b=m[1]d=m[2]o=m[3]elseif n==2 then b=GetCurrentResourceName()d=m[1]o=m[2]elseif n==1 then b=GetCurrentResourceName()d=0;o=m[1]end;Threads.loop2(b,d,o)end;Threads.CreateLoopOnce=function(...)local m={...}local n=#m;local o,d,b;if n==3 then b=m[1]d=m[2]o=m[3]elseif n==2 then b=GetCurrentResourceName()d=m[1]o=m[2]elseif n==1 then b=GetCurrentResourceName()d=0;o=m[1]end;if not Threads_Once[b]then Threads.loop2(b,d,o)Threads_Once[b]=true end end;Threads.IsActionOfLoopAlive=function(b)return Threads_Alive[b]and true or false end;Threads.IsLoopAlive=function(b)return Threads_Functions[b]and true or false end;Threads.KillLoop=function(b,d)Threads_Alive[b]=nil;Threads_Functions[b]=nil;Threads_Timers[b]=nil;Threads_ActionTables[d]=nil;Threads_Once[b]=nil end;Threads.KillActionOfLoop=function(b)for d,e in pairs(Threads_ActionTables)do if e==b then for k=1,#Threads_ActionTables[d]do if Threads_ActionTables[d][k]==b then table.remove(Threads_ActionTables[d],k)if#Threads_ActionTables[d]==0 then Threads.KillLoop(b,d)return end end end end end;Threads_Alive[b]=nil;Threads_Once[b]=nil;Threads_Functions[b]=nil end